<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detailed Neighborhood Boundary Test</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.css" />
    
    <style>
        body { 
            margin: 0; 
            padding: 20px; 
            font-family: system-ui, sans-serif; 
        }
        
        #map { 
            height: 700px; 
            width: 100%; 
            border-radius: 8px; 
            border: 2px solid #ccc;
        }

        .info-box {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
        }

        .legend {
            position: absolute;
            bottom: 30px;
            right: 30px;
            background: white;
            padding: 10px;
            border-radius: 4px;
            border: 1px solid #ccc;
            z-index: 1000;
        }
    </style>
</head>
<body>
    <div class="info-box">
        <h1>Detailed Neighborhood Boundary Test</h1>
        <p>Blue polygon shows the neighborhood boundary. Numbers indicate the sequence of boundary points.
           Click markers to see coordinates.</p>
    </div>
    
    <div id="map"></div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.js"></script>
    
    <script>
        // Initialize map
        const map = L.map('map').setView([34.290000, -118.537000], 16);

        // Add OpenStreetMap tiles
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 19,
            attribution: 'Â© OpenStreetMap contributors'
        }).addTo(map);

        // Define boundary coordinates in sequence
        const boundaryCoords = [
            [34.292236, -118.542148], // 1. Top left
            [34.293619, -118.538704], // 2
            [34.291731, -118.536118], // 3
            [34.291350, -118.536472], // 4
            [34.290677, -118.535936], // 5
            [34.290730, -118.535550], // 6
            [34.289950, -118.535700], // 7
            [34.289923, -118.535496], // 8
            [34.290562, -118.535174], // 9
            [34.290030, -118.534187], // 10
            [34.289835, -118.534273], // 11
            [34.288435, -118.532782], // 12
            [34.288302, -118.532481], // 13
            [34.286857, -118.531569], // 14
            [34.285936, -118.534648], // 15
            [34.287345, -118.538522], // 16
            [34.289250, -118.540539], // 17
            [34.292236, -118.542148]  // 18. Back to start
        ];

        // Add boundary polygon
        const polygon = L.polygon(boundaryCoords, {
            color: '#0072B2',     // Colorblind-friendly blue
            weight: 3,
            opacity: 0.8,
            fillOpacity: 0.1
        }).addTo(map);

        // Add numbered markers at each point
        boundaryCoords.forEach((coords, index) => {
            if (index < boundaryCoords.length - 1) { // Skip the last point as it's the same as first
                L.marker(coords)
                    .bindPopup(`Point ${index + 1}<br>Lat: ${coords[0]}<br>Lon: ${coords[1]}`)
                    .addTo(map);
            }
        });

        // Add key streets for verification
        const streets = [
            { name: "Kirkcolm Ln", pos: [34.2932, -118.5363] },
            { name: "Beaufait Ave", pos: [34.2917, -118.5363] },
            { name: "Eddleston Dr", pos: [34.2920, -118.5367] },
            { name: "Laughton Way", pos: [34.2915, -118.5360] },
            { name: "Darby Ave", pos: [34.2912, -118.5365] },
            { name: "Dunnicliffe Ct", pos: [34.2908, -118.5360] }
        ];

        // Add street labels
        streets.forEach(street => {
            L.marker(street.pos, {
                icon: L.divIcon({
                    className: 'street-label',
                    html: `<div style="background: white; padding: 3px; border: 1px solid #666; border-radius: 3px; font-size: 12px;">${street.name}</div>`,
                    iconSize: [100, 20],
                    iconAnchor: [50, 10]
                })
            }).addTo(map);
        });

        // Fit map to boundary
        map.fitBounds(polygon.getBounds());
    </script>
</body>
</html>
